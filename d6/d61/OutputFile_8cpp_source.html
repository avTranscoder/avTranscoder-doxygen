<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>AvTranscoder: /datas/cnt/workspace/avTranscoder/src/AvTranscoder/file/OutputFile.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AvTranscoder
   &#160;<span id="projectnumber">0.9.4</span>
   </div>
   <div id="projectbrief">C++APIforLibav/FFmpeg</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/d61/OutputFile_8cpp_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OutputFile.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d6/d61/OutputFile_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d22/OutputFile_8hpp.html">OutputFile.hpp</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/d3f/util_8hpp.html">AvTranscoder/util.hpp</a>&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#ifndef FF_INPUT_BUFFER_PADDING_SIZE</span></div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="../../d6/d61/OutputFile_8cpp.html#a9207dd7cb4ee4416f8fd1f7a63af34b7">    8</a></span>&#160;<span class="preprocessor">#define FF_INPUT_BUFFER_PADDING_SIZE 16</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../de/d37/namespaceavtranscoder.html">avtranscoder</a></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;{</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a04da69ff00816080074950e3fd37388e">   14</a></span>&#160;<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#abad729e9026dd505f868b6387d9a4010">OutputFile::OutputFile</a>(<span class="keyword">const</span> std::string&amp; filename, <span class="keyword">const</span> std::string&amp; formatName, <span class="keyword">const</span> std::string&amp; mimeType)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    : _formatContext(AV_OPT_FLAG_ENCODING_PARAM)</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    , _outputStreams()</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    , _frameCount()</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    , _previousProcessedStreamDuration(0.0)</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    , _profile()</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a01e3602e14126c0f392414f94a309fb4">setFilename</a>(filename);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ab45723ab32c330deefb584e1bac67491">setOutputFormat</a>(filename, formatName, mimeType);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;}</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ac0d1d31f68e862482aeb3e392a23d266">   25</a></span>&#160;<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ac0d1d31f68e862482aeb3e392a23d266">OutputFile::~OutputFile</a>()</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">for</span>(std::vector&lt;OutputStream*&gt;::iterator it = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.begin(); it != <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.end(); ++it)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">delete</span>(*it);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    }</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a8cbac949940e43c891be9382ef897553">   33</a></span>&#160;<a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html">IOutputStream</a>&amp; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a8cbac949940e43c891be9382ef897553">OutputFile::addVideoStream</a>(<span class="keyword">const</span> <a class="code" href="../../de/d3d/classavtranscoder_1_1VideoCodec.html">VideoCodec</a>&amp; videoDesc)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    AVStream&amp; stream = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a629c96ed81b4f3d3b040c56b3d44f6ee">addAVStream</a>(videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#a52b5a6d67601c4bf2ad47889738c6eeb">getAVCodec</a>());</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    stream.codec-&gt;width = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().width;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    stream.codec-&gt;height = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().height;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    stream.codec-&gt;bit_rate = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().bit_rate;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    stream.codec-&gt;pix_fmt = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().pix_fmt;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    stream.codec-&gt;profile = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().profile;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    stream.codec-&gt;level = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().level;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    stream.codec-&gt;field_order = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().field_order;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// some codecs need/can use extradata to decode</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    uint8_t* srcExtradata = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().extradata;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> srcExtradataSize = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().extradata_size;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    stream.codec-&gt;extradata = (uint8_t*)av_malloc(srcExtradataSize + <a class="code" href="../../d6/d61/OutputFile_8cpp.html#a9207dd7cb4ee4416f8fd1f7a63af34b7">FF_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    memcpy(stream.codec-&gt;extradata, srcExtradata, srcExtradataSize);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    memset(((uint8_t*)stream.codec-&gt;extradata) + srcExtradataSize, 0, <a class="code" href="../../d6/d61/OutputFile_8cpp.html#a9207dd7cb4ee4416f8fd1f7a63af34b7">FF_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    stream.codec-&gt;extradata_size = videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().extradata_size;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// need to set the time_base on the AVCodecContext and the AVStream</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// compensating the frame rate with the ticks_per_frame and keeping</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// a coherent reading speed.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    av_reduce(&amp;stream.codec-&gt;time_base.num, &amp;stream.codec-&gt;time_base.den,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;              videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().time_base.num * videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().ticks_per_frame,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;              videoDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().time_base.den, INT_MAX);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    stream.time_base = stream.codec-&gt;time_base;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>* outputStream = <span class="keyword">new</span> <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>(*<span class="keyword">this</span>, <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a247b1d493668a788360567bca4e4f051">getNbStreams</a>() - 1);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.push_back(outputStream);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> *outputStream;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a10b002285bb9cc0476360c71e18fb5c0">   68</a></span>&#160;<a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html">IOutputStream</a>&amp; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a10b002285bb9cc0476360c71e18fb5c0">OutputFile::addAudioStream</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d36/classavtranscoder_1_1AudioCodec.html">AudioCodec</a>&amp; audioDesc)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    AVStream&amp; stream = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a629c96ed81b4f3d3b040c56b3d44f6ee">addAVStream</a>(audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#a52b5a6d67601c4bf2ad47889738c6eeb">getAVCodec</a>());</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    stream.codec-&gt;sample_rate = audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().sample_rate;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    stream.codec-&gt;channels = audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().channels;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    stream.codec-&gt;channel_layout = audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().channel_layout;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    stream.codec-&gt;sample_fmt = audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().sample_fmt;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    stream.codec-&gt;frame_size = audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().frame_size;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// need to set the time_base on the AVCodecContext of the AVStream</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    av_reduce(&amp;stream.codec-&gt;time_base.num, &amp;stream.codec-&gt;time_base.den, audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().time_base.num,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;              audioDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">getAVCodecContext</a>().time_base.den, INT_MAX);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>* outputStream = <span class="keyword">new</span> <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>(*<span class="keyword">this</span>, <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a247b1d493668a788360567bca4e4f051">getNbStreams</a>() - 1);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.push_back(outputStream);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> *outputStream;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aa0239482784b031c9919c0fab9f89d85">   88</a></span>&#160;<a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html">IOutputStream</a>&amp; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aa0239482784b031c9919c0fab9f89d85">OutputFile::addDataStream</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d80/classavtranscoder_1_1DataCodec.html">DataCodec</a>&amp; dataDesc)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a629c96ed81b4f3d3b040c56b3d44f6ee">addAVStream</a>(dataDesc.<a class="code" href="../../dd/d85/classavtranscoder_1_1ICodec.html#a52b5a6d67601c4bf2ad47889738c6eeb">getAVCodec</a>());</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>* outputStream = <span class="keyword">new</span> <a class="code" href="../../d3/d57/classavtranscoder_1_1OutputStream.html">OutputStream</a>(*<span class="keyword">this</span>, <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a247b1d493668a788360567bca4e4f051">getNbStreams</a>() - 1);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.push_back(outputStream);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> *outputStream;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a13ed19462dc9817a2a98d37b528dab6d">   98</a></span>&#160;<a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html">IOutputStream</a>&amp; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a13ed19462dc9817a2a98d37b528dab6d">OutputFile::getStream</a>(<span class="keyword">const</span> <span class="keywordtype">size_t</span> streamIndex)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span>(streamIndex &gt;= <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.size())</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        std::stringstream msg;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        msg &lt;&lt; <span class="stringliteral">&quot;Unable to get the stream &quot;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        msg &lt;&lt; streamIndex;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        msg &lt;&lt; <span class="stringliteral">&quot;: the OutputFile &#39;&quot;</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        msg &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        msg &lt;&lt; <span class="stringliteral">&quot;&#39; has only &quot;</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        msg &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.size();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        msg &lt;&lt; <span class="stringliteral">&quot; streams.&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(msg.str());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.at(streamIndex);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">  115</a></span>&#160;std::string <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">OutputFile::getFilename</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ac1f067c8a8003a05fc2bf00135a49cc3">getAVFormatContext</a>().filename);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6dd0fdb1707cfe7277449844117b040c">  120</a></span>&#160;std::string <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6dd0fdb1707cfe7277449844117b040c">OutputFile::getFormatName</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().name == NULL)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#add82efa459e0af380b68522c29b9fd44">LOG_WARN</a>(<span class="stringliteral">&quot;Unknown muxer format name of &#39;&quot;</span> &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().name);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aef246c0daea883f7d012c84c20b0e2db">  130</a></span>&#160;std::string <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aef246c0daea883f7d012c84c20b0e2db">OutputFile::getFormatLongName</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().long_name == NULL)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#add82efa459e0af380b68522c29b9fd44">LOG_WARN</a>(<span class="stringliteral">&quot;Unknown muxer format long name of &#39;&quot;</span> &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().long_name);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a7f5f89a4db0c62fe1140d6a5724bedb1">  140</a></span>&#160;std::string <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a7f5f89a4db0c62fe1140d6a5724bedb1">OutputFile::getFormatMimeType</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().mime_type == NULL)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#add82efa459e0af380b68522c29b9fd44">LOG_WARN</a>(<span class="stringliteral">&quot;Unknown muxer format mime type of &#39;&quot;</span> &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">getAVOutputFormat</a>().mime_type);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a3d507af84229f99961c253094814df53">  150</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a3d507af84229f99961c253094814df53">OutputFile::beginWrap</a>()</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="../../d4/d3d/log_8hpp.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Begin wrap of OutputFile&quot;</span>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a321af7262d4088db83985772140c1dcf">openRessource</a>(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>(), AVIO_FLAG_WRITE);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a5db11bbb06a2159053e58e4bb2d4d1c7">writeHeader</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// set specific wrapping options</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a08775f504583282a5788649539966166">setupRemainingWrappingOptions</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aaa8e0b0eeb1ba14a51f1d3bcfba76a2a">_frameCount</a>.clear();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aaa8e0b0eeb1ba14a51f1d3bcfba76a2a">_frameCount</a>.resize(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.size(), 0);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aeecbb40b81f1642ef7ff28afcce6afb8">  166</a></span>&#160;<a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7">IOutputStream::EWrappingStatus</a> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aeecbb40b81f1642ef7ff28afcce6afb8">OutputFile::wrap</a>(<span class="keyword">const</span> <a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html">CodedData</a>&amp; data, <span class="keyword">const</span> <span class="keywordtype">size_t</span> streamIndex)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span>(!data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a8898c44c94dd1479908348b8f8ccac36">getSize</a>())</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7af0935cb93d21b627b9952884ff24d910">IOutputStream::eWrappingSuccess</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../d4/d3d/log_8hpp.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Wrap on stream &quot;</span> &lt;&lt; streamIndex &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a8898c44c94dd1479908348b8f8ccac36">getSize</a>() &lt;&lt; <span class="stringliteral">&quot; bytes for frame &quot;</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aaa8e0b0eeb1ba14a51f1d3bcfba76a2a">_frameCount</a>.at(streamIndex) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// Packet to wrap</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    AVPacket packet;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    av_init_packet(&amp;packet);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    packet.stream_index = streamIndex;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    packet.data = (uint8_t*)data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a2180723dd1e103c62268f05f874b6bed">getData</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    packet.size = data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a8898c44c94dd1479908348b8f8ccac36">getSize</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    packet.flags = data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">getAVPacket</a>().flags;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// copy timing information</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.at(streamIndex)-&gt;isPTSGenerated())</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span>(data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#ae714d7b62d3c28df2803f1c00fe15da3">getAVStream</a>() != NULL)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keyword">const</span> AVRational&amp; srcTimeBase = data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#ae714d7b62d3c28df2803f1c00fe15da3">getAVStream</a>()-&gt;time_base;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keyword">const</span> AVRational&amp; dstTimeBase = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ad7cbc2b9d9471e0bff2f7e0dbfdb689d">getAVStream</a>(streamIndex).time_base;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="comment">// duration</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            packet.duration = av_rescale_q(data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">getAVPacket</a>().duration, srcTimeBase, dstTimeBase);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="comment">// pts</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span>(data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">getAVPacket</a>().pts != AV_NOPTS_VALUE)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                packet.pts = av_rescale_q(data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">getAVPacket</a>().pts, srcTimeBase, dstTimeBase);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                packet.pts = AV_NOPTS_VALUE;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="comment">// dts</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            packet.dts = av_rescale_q(data.<a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">getAVPacket</a>().dts, srcTimeBase, dstTimeBase);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// add stream PTS if already incremented</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> currentStreamPTS = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.at(streamIndex)-&gt;getStreamPTS();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span>(packet.pts != AV_NOPTS_VALUE &amp;&amp; packet.pts &lt; currentStreamPTS)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            packet.pts += currentStreamPTS;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            packet.dts += currentStreamPTS;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// copy duration of packet wrapped</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// @see OutputStream</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">const_cast&lt;</span><a class="code" href="../../db/daf/classavtranscoder_1_1CodedData.html">CodedData</a>&amp;<span class="keyword">&gt;</span>(data).getAVPacket().duration = packet.duration;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Write packet</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a57d223423ed4ebb1c7ba9b8228eb190f">writeFrame</a>(packet);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> currentStreamDuration = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">_outputStreams</a>.at(streamIndex)-&gt;getStreamDuration();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span>(currentStreamDuration &lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a01966b69a712718e79a9cd860bfc7196">_previousProcessedStreamDuration</a>)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;The output stream &quot;</span> &lt;&lt; streamIndex &lt;&lt; <span class="stringliteral">&quot; is strictly shorter than the previous duration saved (&quot;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                       &lt;&lt; currentStreamDuration &lt;&lt; <span class="stringliteral">&quot;s &lt; &quot;</span> &lt;&lt; <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a01966b69a712718e79a9cd860bfc7196">_previousProcessedStreamDuration</a></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                       &lt;&lt; <span class="stringliteral">&quot;s): wait for more data.&quot;</span>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7ab7ac4a904b844956d3f2ac83b101d642">IOutputStream::eWrappingWaitingForData</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a01966b69a712718e79a9cd860bfc7196">_previousProcessedStreamDuration</a> = currentStreamDuration;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aaa8e0b0eeb1ba14a51f1d3bcfba76a2a">_frameCount</a>.at(streamIndex)++;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7af0935cb93d21b627b9952884ff24d910">IOutputStream::eWrappingSuccess</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6fcce503a484d60ab67bfacdf2f03ba7">  230</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6fcce503a484d60ab67bfacdf2f03ba7">OutputFile::endWrap</a>()</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="../../d4/d3d/log_8hpp.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;End wrap of OutputFile&quot;</span>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#af29c218864acd71b139bd4cd8665d986">writeTrailer</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#abbfd9e7c199c08e73c2a9224e3d456dc">closeRessource</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afc9c1e555af2217aa250171c22ae34fe">  239</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afc9c1e555af2217aa250171c22ae34fe">OutputFile::addMetadata</a>(<span class="keyword">const</span> <a class="code" href="../../de/d37/namespaceavtranscoder.html#ad0031ab575e0c850fc14ea57fa7e6111">PropertyVector</a>&amp; data)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">for</span>(PropertyVector::const_iterator it = data.begin(); it != data.end(); ++it)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afc9c1e555af2217aa250171c22ae34fe">addMetadata</a>(it-&gt;first, it-&gt;second);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a07ab34876e15a2078edbffaaaca89e27">  247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afc9c1e555af2217aa250171c22ae34fe">OutputFile::addMetadata</a>(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; value)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#a4e836c55464d625b0eaccb20651b2342">addMetaData</a>(key, value);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afb1b5aa5594494ab47dfabcb6964350f">  252</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afb1b5aa5594494ab47dfabcb6964350f">OutputFile::setupWrapping</a>(<span class="keyword">const</span> <a class="code" href="../../d6/da3/classavtranscoder_1_1ProfileLoader.html#ac913ce41dbf45953f56ae8337dee22d8">ProfileLoader::Profile</a>&amp; profile)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// check the given profile</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> isValid = <a class="code" href="../../d6/da3/classavtranscoder_1_1ProfileLoader.html#a4dd14a1a1ae1bc3e4ce7c27c882cdeb7">ProfileLoader::checkFormatProfile</a>(profile);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span>(!isValid)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keyword">const</span> std::string msg(<span class="stringliteral">&quot;Invalid format profile to setup wrapping.&quot;</span>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#ad4a9117ce894e3319e903142347a0f63">LOG_ERROR</a>(msg)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(msg);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span>(!profile.empty())</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a378e28bfcb78d17285210d6bbb70a083">LOG_INFO</a>(<span class="stringliteral">&quot;Setup wrapping with:\n&quot;</span> &lt;&lt; profile)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// check if output format indicated is valid with the filename extension</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span>(!av_guess_format(profile.find(<a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a445f772e6a638aafdfa4bb584d8f7027">constants::avProfileFormat</a>)-&gt;second.c_str(), <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>().c_str(), NULL))</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Invalid format according to the file extension.&quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// set output format</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ab45723ab32c330deefb584e1bac67491">setOutputFormat</a>(<a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">getFilename</a>(), profile.find(<a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a445f772e6a638aafdfa4bb584d8f7027">constants::avProfileFormat</a>)-&gt;second);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// set common wrapping options</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a2f0597995c027ab93f3b4424898407a2">setupWrappingOptions</a>(profile);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a2f0597995c027ab93f3b4424898407a2">  280</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a2f0597995c027ab93f3b4424898407a2">OutputFile::setupWrappingOptions</a>(<span class="keyword">const</span> <a class="code" href="../../d6/da3/classavtranscoder_1_1ProfileLoader.html#ac913ce41dbf45953f56ae8337dee22d8">ProfileLoader::Profile</a>&amp; profile)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// set format options</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">for</span>(ProfileLoader::Profile::const_iterator it = profile.begin(); it != profile.end(); ++it)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span>((*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#ada36bbec5461fc0f908063d17740f88e">constants::avProfileIdentificator</a> || (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a79346ba252ee29cb1a97630886096ee4">constants::avProfileIdentificatorHuman</a> ||</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;           (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#aac8b1a88c3f6518ff79c9448c09b323e">constants::avProfileType</a> || (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a445f772e6a638aafdfa4bb584d8f7027">constants::avProfileFormat</a>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="../../d8/de6/classavtranscoder_1_1Option.html">Option</a>&amp; formatOption = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ac3c65fb38ff1bd0b4738a065fc12c731">getOption</a>((*it).first);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            formatOption.<a class="code" href="../../d8/de6/classavtranscoder_1_1Option.html#a4d2fe6dfca5b537ba0de0aed39c5f826">setString</a>((*it).second);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">catch</span>(std::exception&amp; e)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <a class="code" href="../../d4/d3d/log_8hpp.html#a378e28bfcb78d17285210d6bbb70a083">LOG_INFO</a>(<span class="stringliteral">&quot;OutputFile - option &quot;</span> &lt;&lt; (*it).first &lt;&lt; <span class="stringliteral">&quot; will be saved to be called when beginWrap&quot;</span>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1376bfe29375fe5605a1ad4457843754">_profile</a>[(*it).first] = (*it).second;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a08775f504583282a5788649539966166">  302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a08775f504583282a5788649539966166">OutputFile::setupRemainingWrappingOptions</a>()</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// set format options</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">for</span>(ProfileLoader::Profile::const_iterator it = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1376bfe29375fe5605a1ad4457843754">_profile</a>.begin(); it != <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1376bfe29375fe5605a1ad4457843754">_profile</a>.end(); ++it)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">if</span>((*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#ada36bbec5461fc0f908063d17740f88e">constants::avProfileIdentificator</a> || (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a79346ba252ee29cb1a97630886096ee4">constants::avProfileIdentificatorHuman</a> ||</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;           (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#aac8b1a88c3f6518ff79c9448c09b323e">constants::avProfileType</a> || (*it).first == <a class="code" href="../../da/d26/namespaceavtranscoder_1_1constants.html#a445f772e6a638aafdfa4bb584d8f7027">constants::avProfileFormat</a>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <a class="code" href="../../d8/de6/classavtranscoder_1_1Option.html">Option</a>&amp; formatOption = <a class="code" href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">_formatContext</a>.<a class="code" href="../../da/d96/classavtranscoder_1_1FormatContext.html#ac3c65fb38ff1bd0b4738a065fc12c731">getOption</a>((*it).first);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            formatOption.<a class="code" href="../../d8/de6/classavtranscoder_1_1Option.html#a4d2fe6dfca5b537ba0de0aed39c5f826">setString</a>((*it).second);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">catch</span>(std::exception&amp; e)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="../../d4/d3d/log_8hpp.html#add82efa459e0af380b68522c29b9fd44">LOG_WARN</a>(<span class="stringliteral">&quot;OutputFile - can&#39;t set option &quot;</span> &lt;&lt; (*it).first &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; (*it).second &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what())</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a01966b69a712718e79a9cd860bfc7196"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a01966b69a712718e79a9cd860bfc7196">avtranscoder::OutputFile::_previousProcessedStreamDuration</a></div><div class="ttdeci">double _previousProcessedStreamDuration</div><div class="ttdoc">To manage process streams order. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d22/OutputFile_8hpp_source.html#l00106">OutputFile.hpp:106</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_ab8f256c3018257e073305d2f0fc39be0"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ab8f256c3018257e073305d2f0fc39be0">avtranscoder::OutputFile::_formatContext</a></div><div class="ttdeci">FormatContext _formatContext</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d22/OutputFile_8hpp_source.html#l00102">OutputFile.hpp:102</a></div></div>
<div class="ttc" id="namespaceavtranscoder_html_ad0031ab575e0c850fc14ea57fa7e6111"><div class="ttname"><a href="../../de/d37/namespaceavtranscoder.html#ad0031ab575e0c850fc14ea57fa7e6111">avtranscoder::PropertyVector</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; PropertyVector</div><div class="ttdoc">PropertyVector is a vector of pair, because the order of properties matters to us. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dca/properties_2util_8hpp_source.html#l00023">util.hpp:23</a></div></div>
<div class="ttc" id="classavtranscoder_1_1Option_html_a4d2fe6dfca5b537ba0de0aed39c5f826"><div class="ttname"><a href="../../d8/de6/classavtranscoder_1_1Option.html#a4d2fe6dfca5b537ba0de0aed39c5f826">avtranscoder::Option::setString</a></div><div class="ttdeci">void setString(const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0a/Option_8cpp_source.html#l00187">Option.cpp:187</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_afb1b5aa5594494ab47dfabcb6964350f"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afb1b5aa5594494ab47dfabcb6964350f">avtranscoder::OutputFile::setupWrapping</a></div><div class="ttdeci">void setupWrapping(const ProfileLoader::Profile &amp;profile)</div><div class="ttdoc">Set the format and the generic options of the output file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00252">OutputFile.cpp:252</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a247b1d493668a788360567bca4e4f051"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a247b1d493668a788360567bca4e4f051">avtranscoder::FormatContext::getNbStreams</a></div><div class="ttdeci">size_t getNbStreams() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9b/FormatContext_8hpp_source.html#l00086">FormatContext.hpp:86</a></div></div>
<div class="ttc" id="log_8hpp_html_ad4a9117ce894e3319e903142347a0f63"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#ad4a9117ce894e3319e903142347a0f63">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00035">log.hpp:35</a></div></div>
<div class="ttc" id="classavtranscoder_1_1CodedData_html_a2180723dd1e103c62268f05f874b6bed"><div class="ttname"><a href="../../db/daf/classavtranscoder_1_1CodedData.html#a2180723dd1e103c62268f05f874b6bed">avtranscoder::CodedData::getData</a></div><div class="ttdeci">unsigned char * getData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1e/CodedData_8hpp_source.html#l00065">CodedData.hpp:65</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_abbfd9e7c199c08e73c2a9224e3d456dc"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#abbfd9e7c199c08e73c2a9224e3d456dc">avtranscoder::FormatContext::closeRessource</a></div><div class="ttdeci">void closeRessource()</div><div class="ttdoc">Close the resource accessed by the AVIOContext and free it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00075">FormatContext.cpp:75</a></div></div>
<div class="ttc" id="classavtranscoder_1_1ProfileLoader_html_a4dd14a1a1ae1bc3e4ce7c27c882cdeb7"><div class="ttname"><a href="../../d6/da3/classavtranscoder_1_1ProfileLoader.html#a4dd14a1a1ae1bc3e4ce7c27c882cdeb7">avtranscoder::ProfileLoader::checkFormatProfile</a></div><div class="ttdeci">static bool checkFormatProfile(const Profile &amp;profileToCheck)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfc/ProfileLoader_8cpp_source.html#l00179">ProfileLoader.cpp:179</a></div></div>
<div class="ttc" id="classavtranscoder_1_1IOutputStream_html"><div class="ttname"><a href="../../d1/d01/classavtranscoder_1_1IOutputStream.html">avtranscoder::IOutputStream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/IOutputStream_8hpp_source.html#l00011">IOutputStream.hpp:11</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputStream_html"><div class="ttname"><a href="../../d3/d57/classavtranscoder_1_1OutputStream.html">avtranscoder::OutputStream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d84/OutputStream_8hpp_source.html#l00013">OutputStream.hpp:13</a></div></div>
<div class="ttc" id="namespaceavtranscoder_1_1constants_html_a445f772e6a638aafdfa4bb584d8f7027"><div class="ttname"><a href="../../da/d26/namespaceavtranscoder_1_1constants.html#a445f772e6a638aafdfa4bb584d8f7027">avtranscoder::constants::avProfileFormat</a></div><div class="ttdeci">const std::string avProfileFormat</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/ProfileLoader_8hpp_source.html#l00022">ProfileLoader.hpp:22</a></div></div>
<div class="ttc" id="namespaceavtranscoder_html"><div class="ttname"><a href="../../de/d37/namespaceavtranscoder.html">avtranscoder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/AudioCodec_8cpp_source.html#l00006">AudioCodec.cpp:6</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a6dd0fdb1707cfe7277449844117b040c"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6dd0fdb1707cfe7277449844117b040c">avtranscoder::OutputFile::getFormatName</a></div><div class="ttdeci">std::string getFormatName() const </div><div class="ttdoc">A comma separated list of short names for the format, or empty if unknown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00120">OutputFile.cpp:120</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_ab45723ab32c330deefb584e1bac67491"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#ab45723ab32c330deefb584e1bac67491">avtranscoder::FormatContext::setOutputFormat</a></div><div class="ttdeci">void setOutputFormat(const std::string &amp;filename, const std::string &amp;shortName=&quot;&quot;, const std::string &amp;mimeType=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00185">FormatContext.cpp:185</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a664df076b288f071937729dfb38eeb9c"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a664df076b288f071937729dfb38eeb9c">avtranscoder::FormatContext::getAVOutputFormat</a></div><div class="ttdeci">AVOutputFormat &amp; getAVOutputFormat() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9b/FormatContext_8hpp_source.html#l00113">FormatContext.hpp:113</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a4e836c55464d625b0eaccb20651b2342"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a4e836c55464d625b0eaccb20651b2342">avtranscoder::FormatContext::addMetaData</a></div><div class="ttdeci">void addMetaData(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00125">FormatContext.cpp:125</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a7f5f89a4db0c62fe1140d6a5724bedb1"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a7f5f89a4db0c62fe1140d6a5724bedb1">avtranscoder::OutputFile::getFormatMimeType</a></div><div class="ttdeci">std::string getFormatMimeType() const </div><div class="ttdoc">Comma-separated list of mime types, or empty if unknown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00140">OutputFile.cpp:140</a></div></div>
<div class="ttc" id="classavtranscoder_1_1IOutputStream_html_aa0d5ae6b7aa81a3ff2b3d703153ceee7"><div class="ttname"><a href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7">avtranscoder::IOutputStream::EWrappingStatus</a></div><div class="ttdeci">EWrappingStatus</div><div class="ttdoc">define wrapping result status </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/IOutputStream_8hpp_source.html#l00017">IOutputStream.hpp:17</a></div></div>
<div class="ttc" id="classavtranscoder_1_1CodedData_html_ae714d7b62d3c28df2803f1c00fe15da3"><div class="ttname"><a href="../../db/daf/classavtranscoder_1_1CodedData.html#ae714d7b62d3c28df2803f1c00fe15da3">avtranscoder::CodedData::getAVStream</a></div><div class="ttdeci">const AVStream * getAVStream() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1e/CodedData_8hpp_source.html#l00077">CodedData.hpp:77</a></div></div>
<div class="ttc" id="classavtranscoder_1_1CodedData_html_a9a20042558924ae90295ff85ed2d8250"><div class="ttname"><a href="../../db/daf/classavtranscoder_1_1CodedData.html#a9a20042558924ae90295ff85ed2d8250">avtranscoder::CodedData::getAVPacket</a></div><div class="ttdeci">AVPacket &amp; getAVPacket()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1e/CodedData_8hpp_source.html#l00078">CodedData.hpp:78</a></div></div>
<div class="ttc" id="classavtranscoder_1_1ProfileLoader_html_ac913ce41dbf45953f56ae8337dee22d8"><div class="ttname"><a href="../../d6/da3/classavtranscoder_1_1ProfileLoader.html#ac913ce41dbf45953f56ae8337dee22d8">avtranscoder::ProfileLoader::Profile</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; Profile</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/ProfileLoader_8hpp_source.html#l00038">ProfileLoader.hpp:38</a></div></div>
<div class="ttc" id="namespaceavtranscoder_1_1constants_html_ada36bbec5461fc0f908063d17740f88e"><div class="ttname"><a href="../../da/d26/namespaceavtranscoder_1_1constants.html#ada36bbec5461fc0f908063d17740f88e">avtranscoder::constants::avProfileIdentificator</a></div><div class="ttdeci">const std::string avProfileIdentificator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/ProfileLoader_8hpp_source.html#l00016">ProfileLoader.hpp:16</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a541645b4764b11a806d7f5e15a4f7f86"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a541645b4764b11a806d7f5e15a4f7f86">avtranscoder::OutputFile::getFilename</a></div><div class="ttdeci">std::string getFilename() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00115">OutputFile.cpp:115</a></div></div>
<div class="ttc" id="namespaceavtranscoder_1_1constants_html_a79346ba252ee29cb1a97630886096ee4"><div class="ttname"><a href="../../da/d26/namespaceavtranscoder_1_1constants.html#a79346ba252ee29cb1a97630886096ee4">avtranscoder::constants::avProfileIdentificatorHuman</a></div><div class="ttdeci">const std::string avProfileIdentificatorHuman</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/ProfileLoader_8hpp_source.html#l00017">ProfileLoader.hpp:17</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a1376bfe29375fe5605a1ad4457843754"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1376bfe29375fe5605a1ad4457843754">avtranscoder::OutputFile::_profile</a></div><div class="ttdeci">ProfileLoader::Profile _profile</div><div class="ttdoc">To setup specific wrapping options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d22/OutputFile_8hpp_source.html#l00113">OutputFile.hpp:113</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a10b002285bb9cc0476360c71e18fb5c0"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a10b002285bb9cc0476360c71e18fb5c0">avtranscoder::OutputFile::addAudioStream</a></div><div class="ttdeci">IOutputStream &amp; addAudioStream(const AudioCodec &amp;audioDesc)</div><div class="ttdoc">Add an audio output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00068">OutputFile.cpp:68</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a629c96ed81b4f3d3b040c56b3d44f6ee"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a629c96ed81b4f3d3b040c56b3d44f6ee">avtranscoder::FormatContext::addAVStream</a></div><div class="ttdeci">AVStream &amp; addAVStream(const AVCodec &amp;avCodec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00134">FormatContext.cpp:134</a></div></div>
<div class="ttc" id="log_8hpp_html_a378e28bfcb78d17285210d6bbb70a083"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#a378e28bfcb78d17285210d6bbb70a083">LOG_INFO</a></div><div class="ttdeci">#define LOG_INFO(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00023">log.hpp:23</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a2f0597995c027ab93f3b4424898407a2"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a2f0597995c027ab93f3b4424898407a2">avtranscoder::OutputFile::setupWrappingOptions</a></div><div class="ttdeci">void setupWrappingOptions(const ProfileLoader::Profile &amp;profile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00280">OutputFile.cpp:280</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_af29c218864acd71b139bd4cd8665d986"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#af29c218864acd71b139bd4cd8665d986">avtranscoder::FormatContext::writeTrailer</a></div><div class="ttdeci">void writeTrailer()</div><div class="ttdoc">Write the stream trailer to an output media file. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00116">FormatContext.cpp:116</a></div></div>
<div class="ttc" id="classavtranscoder_1_1IOutputStream_html_aa0d5ae6b7aa81a3ff2b3d703153ceee7ab7ac4a904b844956d3f2ac83b101d642"><div class="ttname"><a href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7ab7ac4a904b844956d3f2ac83b101d642">avtranscoder::IOutputStream::eWrappingWaitingForData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/IOutputStream_8hpp_source.html#l00020">IOutputStream.hpp:20</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a5db11bbb06a2159053e58e4bb2d4d1c7"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a5db11bbb06a2159053e58e4bb2d4d1c7">avtranscoder::FormatContext::writeHeader</a></div><div class="ttdeci">void writeHeader(AVDictionary **options=NULL)</div><div class="ttdoc">Write the stream header to an output media file. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00087">FormatContext.cpp:87</a></div></div>
<div class="ttc" id="classavtranscoder_1_1Option_html"><div class="ttname"><a href="../../d8/de6/classavtranscoder_1_1Option.html">avtranscoder::Option</a></div><div class="ttdoc">Wrapper of AVOption. Get its type to know what the option is about: Int, Double, Ratio, Choice... Parse its array of options to get the potential childs (Choice and Group). </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d86/Option_8hpp_source.html#l00036">Option.hpp:36</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_aeecbb40b81f1642ef7ff28afcce6afb8"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aeecbb40b81f1642ef7ff28afcce6afb8">avtranscoder::OutputFile::wrap</a></div><div class="ttdeci">IOutputStream::EWrappingStatus wrap(const CodedData &amp;data, const size_t streamIndex)</div><div class="ttdoc">Wrap a packet of data in the output ressource. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00166">OutputFile.cpp:166</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_ac3c65fb38ff1bd0b4738a065fc12c731"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#ac3c65fb38ff1bd0b4738a065fc12c731">avtranscoder::FormatContext::getOption</a></div><div class="ttdeci">Option &amp; getOption(const std::string &amp;optionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9b/FormatContext_8hpp_source.html#l00095">FormatContext.hpp:95</a></div></div>
<div class="ttc" id="util_8hpp_html"><div class="ttname"><a href="../../d0/d3f/util_8hpp.html">util.hpp</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_aef246c0daea883f7d012c84c20b0e2db"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aef246c0daea883f7d012c84c20b0e2db">avtranscoder::OutputFile::getFormatLongName</a></div><div class="ttdeci">std::string getFormatLongName() const </div><div class="ttdoc">Descriptive name for the format, meant to be more human-readable than name, or empty if unknown...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00130">OutputFile.cpp:130</a></div></div>
<div class="ttc" id="OutputFile_8hpp_html"><div class="ttname"><a href="../../dc/d22/OutputFile_8hpp.html">OutputFile.hpp</a></div></div>
<div class="ttc" id="log_8hpp_html_add82efa459e0af380b68522c29b9fd44"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#add82efa459e0af380b68522c29b9fd44">LOG_WARN</a></div><div class="ttdeci">#define LOG_WARN(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00029">log.hpp:29</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_aaa8e0b0eeb1ba14a51f1d3bcfba76a2a"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aaa8e0b0eeb1ba14a51f1d3bcfba76a2a">avtranscoder::OutputFile::_frameCount</a></div><div class="ttdeci">std::vector&lt; size_t &gt; _frameCount</div><div class="ttdoc">Number of wrapped frames. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d22/OutputFile_8hpp_source.html#l00104">OutputFile.hpp:104</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_abad729e9026dd505f868b6387d9a4010"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#abad729e9026dd505f868b6387d9a4010">avtranscoder::OutputFile::OutputFile</a></div><div class="ttdeci">OutputFile(const OutputFile &amp;outputFile)</div></div>
<div class="ttc" id="classavtranscoder_1_1IOutputStream_html_aa0d5ae6b7aa81a3ff2b3d703153ceee7af0935cb93d21b627b9952884ff24d910"><div class="ttname"><a href="../../d1/d01/classavtranscoder_1_1IOutputStream.html#aa0d5ae6b7aa81a3ff2b3d703153ceee7af0935cb93d21b627b9952884ff24d910">avtranscoder::IOutputStream::eWrappingSuccess</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/IOutputStream_8hpp_source.html#l00019">IOutputStream.hpp:19</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a6fcce503a484d60ab67bfacdf2f03ba7"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a6fcce503a484d60ab67bfacdf2f03ba7">avtranscoder::OutputFile::endWrap</a></div><div class="ttdeci">bool endWrap()</div><div class="ttdoc">Close ressource and write trailer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00230">OutputFile.cpp:230</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_ac0d1d31f68e862482aeb3e392a23d266"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#ac0d1d31f68e862482aeb3e392a23d266">avtranscoder::OutputFile::~OutputFile</a></div><div class="ttdeci">~OutputFile()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00025">OutputFile.cpp:25</a></div></div>
<div class="ttc" id="classavtranscoder_1_1CodedData_html_a8898c44c94dd1479908348b8f8ccac36"><div class="ttname"><a href="../../db/daf/classavtranscoder_1_1CodedData.html#a8898c44c94dd1479908348b8f8ccac36">avtranscoder::CodedData::getSize</a></div><div class="ttdeci">size_t getSize() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1e/CodedData_8hpp_source.html#l00070">CodedData.hpp:70</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a57d223423ed4ebb1c7ba9b8228eb190f"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a57d223423ed4ebb1c7ba9b8228eb190f">avtranscoder::FormatContext::writeFrame</a></div><div class="ttdeci">void writeFrame(AVPacket &amp;packet, bool interleaved=true)</div><div class="ttdoc">Write a packet to an output media file. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00099">FormatContext.cpp:99</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a08775f504583282a5788649539966166"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a08775f504583282a5788649539966166">avtranscoder::OutputFile::setupRemainingWrappingOptions</a></div><div class="ttdeci">void setupRemainingWrappingOptions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00302">OutputFile.cpp:302</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a3d507af84229f99961c253094814df53"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a3d507af84229f99961c253094814df53">avtranscoder::OutputFile::beginWrap</a></div><div class="ttdeci">bool beginWrap()</div><div class="ttdoc">Open ressource, write header, and setup specific wrapping options given when call setupWrapping...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00150">OutputFile.cpp:150</a></div></div>
<div class="ttc" id="classavtranscoder_1_1ICodec_html_ad8dc5ffc849faff683456a93adc48ba5"><div class="ttname"><a href="../../dd/d85/classavtranscoder_1_1ICodec.html#ad8dc5ffc849faff683456a93adc48ba5">avtranscoder::ICodec::getAVCodecContext</a></div><div class="ttdeci">AVCodecContext &amp; getAVCodecContext()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd4/ICodec_8hpp_source.html#l00053">ICodec.hpp:53</a></div></div>
<div class="ttc" id="log_8hpp_html_a754b3d074e0af4ad3c7b918dd77ecb2d"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00017">log.hpp:17</a></div></div>
<div class="ttc" id="classavtranscoder_1_1CodedData_html"><div class="ttname"><a href="../../db/daf/classavtranscoder_1_1CodedData.html">avtranscoder::CodedData</a></div><div class="ttdoc">This class describes coded data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1e/CodedData_8hpp_source.html#l00018">CodedData.hpp:18</a></div></div>
<div class="ttc" id="classavtranscoder_1_1AudioCodec_html"><div class="ttname"><a href="../../d1/d36/classavtranscoder_1_1AudioCodec.html">avtranscoder::AudioCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da5/AudioCodec_8hpp_source.html#l00010">AudioCodec.hpp:10</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_afc9c1e555af2217aa250171c22ae34fe"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#afc9c1e555af2217aa250171c22ae34fe">avtranscoder::OutputFile::addMetadata</a></div><div class="ttdeci">void addMetadata(const PropertyVector &amp;data)</div><div class="ttdoc">Add metadata to the output file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00239">OutputFile.cpp:239</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a321af7262d4088db83985772140c1dcf"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a321af7262d4088db83985772140c1dcf">avtranscoder::FormatContext::openRessource</a></div><div class="ttdeci">void openRessource(const std::string &amp;url, int flags)</div><div class="ttdoc">Create and initialize a AVIOContext for accessing the resource indicated by url. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00063">FormatContext.cpp:63</a></div></div>
<div class="ttc" id="OutputFile_8cpp_html_a9207dd7cb4ee4416f8fd1f7a63af34b7"><div class="ttname"><a href="../../d6/d61/OutputFile_8cpp.html#a9207dd7cb4ee4416f8fd1f7a63af34b7">FF_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define FF_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00008">OutputFile.cpp:8</a></div></div>
<div class="ttc" id="classavtranscoder_1_1ICodec_html_a52b5a6d67601c4bf2ad47889738c6eeb"><div class="ttname"><a href="../../dd/d85/classavtranscoder_1_1ICodec.html#a52b5a6d67601c4bf2ad47889738c6eeb">avtranscoder::ICodec::getAVCodec</a></div><div class="ttdeci">AVCodec &amp; getAVCodec()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd4/ICodec_8hpp_source.html#l00055">ICodec.hpp:55</a></div></div>
<div class="ttc" id="classavtranscoder_1_1DataCodec_html"><div class="ttname"><a href="../../d7/d80/classavtranscoder_1_1DataCodec.html">avtranscoder::DataCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/DataCodec_8hpp_source.html#l00009">DataCodec.hpp:9</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_ac1f067c8a8003a05fc2bf00135a49cc3"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#ac1f067c8a8003a05fc2bf00135a49cc3">avtranscoder::FormatContext::getAVFormatContext</a></div><div class="ttdeci">AVFormatContext &amp; getAVFormatContext() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9b/FormatContext_8hpp_source.html#l00112">FormatContext.hpp:112</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a13ed19462dc9817a2a98d37b528dab6d"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a13ed19462dc9817a2a98d37b528dab6d">avtranscoder::OutputFile::getStream</a></div><div class="ttdeci">IOutputStream &amp; getStream(const size_t streamIndex)</div><div class="ttdoc">Get the output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00098">OutputFile.cpp:98</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a1f14100c5d1bcdee3ec0d1bead095cc2"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a1f14100c5d1bcdee3ec0d1bead095cc2">avtranscoder::OutputFile::_outputStreams</a></div><div class="ttdeci">std::vector&lt; OutputStream * &gt; _outputStreams</div><div class="ttdoc">Has ownership. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d22/OutputFile_8hpp_source.html#l00103">OutputFile.hpp:103</a></div></div>
<div class="ttc" id="namespaceavtranscoder_1_1constants_html_aac8b1a88c3f6518ff79c9448c09b323e"><div class="ttname"><a href="../../da/d26/namespaceavtranscoder_1_1constants.html#aac8b1a88c3f6518ff79c9448c09b323e">avtranscoder::constants::avProfileType</a></div><div class="ttdeci">const std::string avProfileType</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/ProfileLoader_8hpp_source.html#l00018">ProfileLoader.hpp:18</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_aa0239482784b031c9919c0fab9f89d85"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#aa0239482784b031c9919c0fab9f89d85">avtranscoder::OutputFile::addDataStream</a></div><div class="ttdeci">IOutputStream &amp; addDataStream(const DataCodec &amp;dataDesc)</div><div class="ttdoc">Add a data output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00088">OutputFile.cpp:88</a></div></div>
<div class="ttc" id="classavtranscoder_1_1VideoCodec_html"><div class="ttname"><a href="../../de/d3d/classavtranscoder_1_1VideoCodec.html">avtranscoder::VideoCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d28/VideoCodec_8hpp_source.html#l00010">VideoCodec.hpp:10</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_ad7cbc2b9d9471e0bff2f7e0dbfdb689d"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#ad7cbc2b9d9471e0bff2f7e0dbfdb689d">avtranscoder::FormatContext::getAVStream</a></div><div class="ttdeci">AVStream &amp; getAVStream(size_t index) const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00168">FormatContext.cpp:168</a></div></div>
<div class="ttc" id="classavtranscoder_1_1OutputFile_html_a8cbac949940e43c891be9382ef897553"><div class="ttname"><a href="../../db/dd6/classavtranscoder_1_1OutputFile.html#a8cbac949940e43c891be9382ef897553">avtranscoder::OutputFile::addVideoStream</a></div><div class="ttdeci">IOutputStream &amp; addVideoStream(const VideoCodec &amp;videoDesc)</div><div class="ttdoc">Add a video output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d61/OutputFile_8cpp_source.html#l00033">OutputFile.cpp:33</a></div></div>
<div class="ttc" id="classavtranscoder_1_1FormatContext_html_a01e3602e14126c0f392414f94a309fb4"><div class="ttname"><a href="../../da/d96/classavtranscoder_1_1FormatContext.html#a01e3602e14126c0f392414f94a309fb4">avtranscoder::FormatContext::setFilename</a></div><div class="ttdeci">void setFilename(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3a/FormatContext_8cpp_source.html#l00180">FormatContext.cpp:180</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_873d59d1c6ba5221f5ca350be370e8d4.html">AvTranscoder</a></li><li class="navelem"><a class="el" href="../../dir_a4fdb5e06f1bab4c6268d594caf5ed48.html">file</a></li><li class="navelem"><a class="el" href="../../d6/d61/OutputFile_8cpp.html">OutputFile.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
